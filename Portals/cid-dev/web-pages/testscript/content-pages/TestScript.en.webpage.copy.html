<meta charset="utf-8" />
<div class="row sectionBlockLayout" style="display: flex; flex-wrap: wrap; padding: 8px; margin: 0px; text-align: left; min-height: 100px;">
  <div class="container" style="display: flex; flex-wrap: wrap;"><div class="col-md-12 columnBlockLayout" style="display: flex; flex-direction: column;"></div></div>
  <button id="download">download</button><button id="callapi">call api</button>
</div>
<script charset="utf-8">
        $(document).ready(async function() {





  var data;
  var CRA_Data = {};
  var CRA_Flow_URL
  var cid_crabusinessnumber = "0000000";
  let body = {
      "cid_crabusinessnumber": cid_crabusinessnumber
  };
  var results = tdg.webapi.SelectedColumnlist("qm_environmentsettingses", "qm_value", "qm_name eq 'CID_Flow_CRA_API'");
    if (results.length > 0) {
                 CRA_Flow_URL = results[0]["qm_value"];
                }
  alert (CRA_Flow_URL);
  let req = new XMLHttpRequest();
  req.open("POST", CRA_Flow_URL, true);
  req.setRequestHeader("Content-Type", "application/json");
  req.onreadystatechange = function () {
      if (this.readyState === 4) {
          req.onreadystatechange = null;
          if (this.status === 200) {
              debugger;
              alert("this is response" + this.response);
              var json = JSON.parse(this.response);
              alert("json is invalid " + json.IsInvalidData);
              if (json.IsInvalidData) {

              }
              else {

                  if (json == null) {
                      return "";
                  }

                  if (json.length == 0) {
                      return "";
                  }

                  //data = data[0];

                  CRA_Data.LegalName = json.LegalName;
                  CRA_Data.OperatingName = json.LegalName;
                  CRA_Data.BusinessRegistrationNumber = cid_crabusinessnumber;
                  var a = {};
                  a.AddressLine1Text = json.AddressLine1Text;
                  a.AddressLine2Text = json.AddressLine2Text;
                  a.CityName = json.CityName;
                  a.ProvinceStateCode = json.ProvinceStateCode;
                  a.PostalZipCode = json.PostalZipCode;
                  a.CountryCode = json.CountryCode;

                  CRA_Data.PhysicalLocationAddress = a;
                  //if (step_start == "1") {
                    //  tdg.cid.crw.start_BN_Selected(CRA_Data);
                      //return CRA_Data;
                  //}
                  //else {
                    //  return CRA_Data;
                  //}

              }

          } else {
              debugger;

          }
      }
  };
  req.send(JSON.stringify(body));


    });
</script>
<script onerror="javascript: var target = event.target; var script = document.createElement('script'); script.crossOrigin = target.crossOrigin; script.src = '/dist/preform.bundle-8c34588cdc.js'; script.type = 'text/javascript'; target.insertAdjacentElement('afterend',script);" src="https://content.powerapps.com/resource/powerappsportal/dist/preform.bundle-8c34588cdc.js" type="text/javascript"></script>
<script onerror="javascript: var target = event.target; var script = document.createElement('script'); script.crossOrigin = target.crossOrigin; script.src = '/dist/app.bundle-2f49132668.js'; script.type = 'text/javascript'; target.insertAdjacentElement('afterend',script);" src="https://content.powerapps.com/resource/powerappsportal/dist/app.bundle-2f49132668.js" type="text/javascript"></script>
<script onerror="javascript: var target = event.target; var script = document.createElement('script'); script.crossOrigin = target.crossOrigin; script.src = '/dist/preform.bundle-8c34588cdc.js'; script.type = 'text/javascript'; target.insertAdjacentElement('afterend',script);" src="https://content.powerapps.com/resource/powerappsportal/dist/preform.bundle-8c34588cdc.js" type="text/javascript"></script>
<script onerror="javascript: var target = event.target; var script = document.createElement('script'); script.crossOrigin = target.crossOrigin; script.src = '/dist/app.bundle-2f49132668.js'; script.type = 'text/javascript'; target.insertAdjacentElement('afterend',script);" src="https://content.powerapps.com/resource/powerappsportal/dist/app.bundle-2f49132668.js" type="text/javascript"></script>
<script onerror="javascript: var target = event.target; var script = document.createElement('script'); script.crossOrigin = target.crossOrigin; script.src = '/dist/preform.bundle-8c34588cdc.js'; script.type = 'text/javascript'; target.insertAdjacentElement('afterend',script);" src="https://content.powerapps.com/resource/powerappsportal/dist/preform.bundle-8c34588cdc.js" type="text/javascript"></script>
<script onerror="javascript: var target = event.target; var script = document.createElement('script'); script.crossOrigin = target.crossOrigin; script.src = '/dist/app.bundle-2f49132668.js'; script.type = 'text/javascript'; target.insertAdjacentElement('afterend',script);" src="https://content.powerapps.com/resource/powerappsportal/dist/app.bundle-2f49132668.js" type="text/javascript"></script>
<script onerror="javascript: var target = event.target; var script = document.createElement('script'); script.crossOrigin = target.crossOrigin; script.src = '/dist/preform.bundle-8c34588cdc.js'; script.type = 'text/javascript'; target.insertAdjacentElement('afterend',script);" src="https://content.powerapps.com/resource/powerappsportal/dist/preform.bundle-8c34588cdc.js" type="text/javascript"></script>
<script onerror="javascript: var target = event.target; var script = document.createElement('script'); script.crossOrigin = target.crossOrigin; script.src = '/dist/app.bundle-2f49132668.js'; script.type = 'text/javascript'; target.insertAdjacentElement('afterend',script);" src="https://content.powerapps.com/resource/powerappsportal/dist/app.bundle-2f49132668.js" type="text/javascript"></script>
<script onerror="javascript: var target = event.target; var script = document.createElement('script'); script.crossOrigin = target.crossOrigin; script.src = '/dist/preform.bundle-8c34588cdc.js'; script.type = 'text/javascript'; target.insertAdjacentElement('afterend',script);" src="https://content.powerapps.com/resource/powerappsportal/dist/preform.bundle-8c34588cdc.js" type="text/javascript"></script>
<script onerror="javascript: var target = event.target; var script = document.createElement('script'); script.crossOrigin = target.crossOrigin; script.src = '/dist/app.bundle-2f49132668.js'; script.type = 'text/javascript'; target.insertAdjacentElement('afterend',script);" src="https://content.powerapps.com/resource/powerappsportal/dist/app.bundle-2f49132668.js" type="text/javascript"></script>
<script onerror="javascript: var target = event.target; var script = document.createElement('script'); script.crossOrigin = target.crossOrigin; script.src = '/dist/preform.bundle-8c34588cdc.js'; script.type = 'text/javascript'; target.insertAdjacentElement('afterend',script);" src="https://content.powerapps.com/resource/powerappsportal/dist/preform.bundle-8c34588cdc.js" type="text/javascript"></script>
<script onerror="javascript: var target = event.target; var script = document.createElement('script'); script.crossOrigin = target.crossOrigin; script.src = '/dist/app.bundle-2f49132668.js'; script.type = 'text/javascript'; target.insertAdjacentElement('afterend',script);" src="https://content.powerapps.com/resource/powerappsportal/dist/app.bundle-2f49132668.js" type="text/javascript"></script>
<script onerror="javascript: var target = event.target; var script = document.createElement('script'); script.crossOrigin = target.crossOrigin; script.src = '/dist/preform.bundle-8c34588cdc.js'; script.type = 'text/javascript'; target.insertAdjacentElement('afterend',script);" src="https://content.powerapps.com/resource/powerappsportal/dist/preform.bundle-8c34588cdc.js" type="text/javascript"></script>
<script onerror="javascript: var target = event.target; var script = document.createElement('script'); script.crossOrigin = target.crossOrigin; script.src = '/dist/app.bundle-2f49132668.js'; script.type = 'text/javascript'; target.insertAdjacentElement('afterend',script);" src="https://content.powerapps.com/resource/powerappsportal/dist/app.bundle-2f49132668.js" type="text/javascript"></script>
<script onerror="javascript: var target = event.target; var script = document.createElement('script'); script.crossOrigin = target.crossOrigin; script.src = '/dist/preform.bundle-8c34588cdc.js'; script.type = 'text/javascript'; target.insertAdjacentElement('afterend',script);" src="https://content.powerapps.com/resource/powerappsportal/dist/preform.bundle-8c34588cdc.js" type="text/javascript"></script>
<script onerror="javascript: var target = event.target; var script = document.createElement('script'); script.crossOrigin = target.crossOrigin; script.src = '/dist/app.bundle-2f49132668.js'; script.type = 'text/javascript'; target.insertAdjacentElement('afterend',script);" src="https://content.powerapps.com/resource/powerappsportal/dist/app.bundle-2f49132668.js" type="text/javascript"></script>
